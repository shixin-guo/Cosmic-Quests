"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{8461:function(e,t,r){r.d(t,{Gf:function(){return r4},_G:function(){return V}});var n,a,s,i,o,c,l,u,d,h,p,f,g,y,_,E,m,b,C,T,k,v,S,A,I,w=r(6943),N=r(7843),O=r(3391),R=r(7656),x=r(7069),D=r(3125),$=r(2900),B=r(4587),P=r(7872),L=Object.defineProperty,F=(e,t)=>{for(var r in t)L(e,r,{get:t[r],enumerable:!0})},V={};F(V,{ADDR_BOUND:()=>ed,API_VERSION:()=>el,BN_FEE_TRANSACTION_VERSION_1:()=>es,BN_FEE_TRANSACTION_VERSION_2:()=>ei,BN_TRANSACTION_VERSION_1:()=>en,BN_TRANSACTION_VERSION_2:()=>ea,BaseUrl:()=>eh,HEX_STR_TRANSACTION_VERSION_1:()=>et,HEX_STR_TRANSACTION_VERSION_2:()=>er,IS_BROWSER:()=>U,MASK_250:()=>ec,MAX_STORAGE_ITEM_SIZE:()=>eu,NetworkName:()=>ep,RPC_DEFAULT_VERSION:()=>e_,RPC_NODES:()=>eE,StarknetChainId:()=>ef,TEXT_TO_FELT_MAX_LEN:()=>ee,TransactionHashPrefix:()=>eg,UDC:()=>ey,ZERO:()=>eo}),F({},{IS_BROWSER:()=>U,addHexPrefix:()=>q,arrayBufferToString:()=>H,atobUniversal:()=>G,btoaUniversal:()=>K,buf2hex:()=>Y,calcByteLength:()=>J,padLeft:()=>X,pascalToSnake:()=>Z,removeHexPrefix:()=>W,sanitizeBytes:()=>z,sanitizeHex:()=>Q,stringToArrayBuffer:()=>M,utf8ToArray:()=>j});var U="undefined"!=typeof window;function H(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function j(e){return new TextEncoder().encode(e)}function M(e){return j(e)}function G(e){return w.US.decode(e)}function K(e){return w.US.encode(new Uint8Array(e))}function Y(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function W(e){return e.replace(/^0x/i,"")}function q(e){return`0x${W(e)}`}function X(e,t,r="0"){return function(e,t,r,n="0"){let a=t-e.length,s=e;if(a>0){let t=n.repeat(a);s=r?t+e:e+t}return s}(e,t,!0,r)}function J(e,t=8){let{length:r}=e,n=r%t;return n?(r-n)/t*t+t:r}function z(e,t=8,r="0"){return X(e,J(e,t),r)}function Q(e){return(e=z(e=W(e),2))&&(e=q(e)),e}var Z=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e,ee=31,et="0x1",er="0x2",en=1n,ea=2n,es=2n**128n+en,ei=2n**128n+ea,eo=0n,ec=2n**250n-1n,el=eo,eu=256n,ed=2n**251n-eu,eh=((n=eh||{}).SN_MAIN="https://alpha-mainnet.starknet.io",n.SN_GOERLI="https://alpha4.starknet.io",n.SN_SEPOLIA="https://alpha-sepolia.starknet.io",n),ep=((a=ep||{}).SN_MAIN="SN_MAIN",a.SN_GOERLI="SN_GOERLI",a.SN_SEPOLIA="SN_SEPOLIA",a),ef=((s=ef||{}).SN_MAIN="0x534e5f4d41494e",s.SN_GOERLI="0x534e5f474f45524c49",s.SN_SEPOLIA="0x534e5f5345504f4c4941",s),eg=((i=eg||{}).DECLARE="0x6465636c617265",i.DEPLOY="0x6465706c6f79",i.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",i.INVOKE="0x696e766f6b65",i.L1_HANDLER="0x6c315f68616e646c6572",i),ey={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},e_="v0_5",eE={SN_GOERLI:["https://starknet-testnet.public.blastapi.io/rpc/","https://free-rpc.nethermind.io/goerli-juno/"],SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/","https://free-rpc.nethermind.io/mainnet-juno/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/","https://free-rpc.nethermind.io/sepolia-juno/"]};F({},{BlockStatus:()=>ew,BlockTag:()=>eN,EntryPointType:()=>ek,Litteral:()=>eT,RPC:()=>eO,SIMULATION_FLAG:()=>em,Sequencer:()=>eH,TransactionExecutionStatus:()=>eI,TransactionFinalityStatus:()=>eA,TransactionStatus:()=>eS,TransactionType:()=>ev,Uint:()=>eC,ValidateType:()=>eb});var em=((o=em||{}).SKIP_VALIDATE="SKIP_VALIDATE",o.SKIP_EXECUTE="SKIP_EXECUTE",o),eb=((c=eb||{}).DEPLOY="DEPLOY",c.CALL="CALL",c.INVOKE="INVOKE",c),eC=((l=eC||{}).u8="core::integer::u8",l.u16="core::integer::u16",l.u32="core::integer::u32",l.u64="core::integer::u64",l.u128="core::integer::u128",l.u256="core::integer::u256",l),eT=((u=eT||{}).ClassHash="core::starknet::class_hash::ClassHash",u.ContractAddress="core::starknet::contract_address::ContractAddress",u),ek=((d=ek||{}).EXTERNAL="EXTERNAL",d.L1_HANDLER="L1_HANDLER",d.CONSTRUCTOR="CONSTRUCTOR",d),ev=((h=ev||{}).DECLARE="DECLARE",h.DEPLOY="DEPLOY",h.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",h.INVOKE="INVOKE_FUNCTION",h),eS=((p=eS||{}).NOT_RECEIVED="NOT_RECEIVED",p.RECEIVED="RECEIVED",p.ACCEPTED_ON_L2="ACCEPTED_ON_L2",p.ACCEPTED_ON_L1="ACCEPTED_ON_L1",p.REJECTED="REJECTED",p.REVERTED="REVERTED",p),eA=((f=eA||{}).NOT_RECEIVED="NOT_RECEIVED",f.RECEIVED="RECEIVED",f.ACCEPTED_ON_L2="ACCEPTED_ON_L2",f.ACCEPTED_ON_L1="ACCEPTED_ON_L1",f),eI=((g=eI||{}).REJECTED="REJECTED",g.REVERTED="REVERTED",g.SUCCEEDED="SUCCEEDED",g),ew=((y=ew||{}).PENDING="PENDING",y.ACCEPTED_ON_L1="ACCEPTED_ON_L1",y.ACCEPTED_ON_L2="ACCEPTED_ON_L2",y.REJECTED="REJECTED",y),eN=((_=eN||{}).pending="pending",_.latest="latest",_),eO={};F(eO,{EBlockTag:()=>eV,EDataAvailabilityMode:()=>eU,ESimulationFlag:()=>eB,ETransactionExecutionStatus:()=>eF,ETransactionFinalityStatus:()=>eL,ETransactionStatus:()=>eP,ETransactionType:()=>e$,Errors:()=>ex,JRPC:()=>eR,SPEC:()=>eD});var eR={},ex={},eD={},e$=((E=e$||{}).DECLARE="DECLARE",E.DEPLOY="DEPLOY",E.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",E.INVOKE="INVOKE",E.L1_HANDLER="L1_HANDLER",E),eB=((m=eB||{}).SKIP_VALIDATE="SKIP_VALIDATE",m.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",m),eP=((b=eP||{}).RECEIVED="RECEIVED",b.REJECTED="REJECTED",b.ACCEPTED_ON_L2="ACCEPTED_ON_L2",b.ACCEPTED_ON_L1="ACCEPTED_ON_L1",b),eL=((C=eL||{}).ACCEPTED_ON_L2="ACCEPTED_ON_L2",C.ACCEPTED_ON_L1="ACCEPTED_ON_L1",C),eF=((T=eF||{}).SUCCEEDED="SUCCEEDED",T.REVERTED="REVERTED",T),eV=((k=eV||{}).LATEST="latest",k.PENDING="pending",k),eU=((v=eU||{}).L1="L1",v.L2="L2",v),eH={};function ej(e,t){if(!e)throw Error(t||"Assertion failure")}function eM(e){return/^0x[0-9a-f]*$/i.test(e)}function eG(e){return BigInt(e)}function eK(e){return"bigint"==typeof e}function eY(e){return q(eG(e).toString(16))}F({},{assertInRange:()=>ez,bigNumberishArrayToDecimalStringArray:()=>eQ,bigNumberishArrayToHexadecimalStringArray:()=>eZ,cleanHex:()=>eJ,getDecimalString:()=>e1,getHexString:()=>e2,getHexStringArray:()=>e6,hexToBytes:()=>e4,hexToDecimalString:()=>eX,isBigInt:()=>eK,isHex:()=>eM,isStringWholeNumber:()=>e0,toBigInt:()=>eG,toCairoBool:()=>e5,toHex:()=>eY,toHexString:()=>eW,toStorageKey:()=>eq});var eW=eY;function eq(e){let t=q(eG(e).toString(16).padStart(64,"0"));return t}function eX(e){return BigInt(q(e)).toString(10)}var eJ=e=>e.toLowerCase().replace(/^(0x)0+/,"$1");function ez(e,t,r,n=""){let a=""===n?"invalid length":`invalid ${n} length`,s=BigInt(e),i=BigInt(t),o=BigInt(r);ej(s>=i&&s<=o,`Message not signable, ${a}.`)}function eQ(e){return e.map(e=>eG(e).toString(10))}function eZ(e){return e.map(e=>eY(e))}var e0=e=>/^\d+$/.test(e);function e1(e){if(eM(e))return eX(e);if(e0(e))return e;throw Error(`${e} need to be hex-string or whole-number-string`)}function e2(e){if(eM(e))return e;if(e0(e))return eW(e);throw Error(`${e} need to be hex-string or whole-number-string`)}function e6(e){return e.map(e=>e2(e))}var e5=e=>(+e).toString();function e4(e){if(!eM(e))throw Error(`${e} need to be a hex-string`);let t=W(e);return t.length%2!=0&&(t=`0${t}`),(0,N.hexToBytes)(t)}function e9(e){let t=W(eY(BigInt(e))),r=t.length%2==0?t:`0${t}`;return q((0,O.keccak)(e4(q(r))).toString(16))}function e7(e){let t=BigInt(q((0,O.keccak)(j(e)).toString(16)));return t&ec}function e3(e){return eY(e7(e))}function e8(e){return eM(e)?e:e0(e)?eW(e):e3(e)}function te(e){return/^[\x00-\x7F]*$/.test(e)}function tt(e){return e.length<=ee}function tr(e){return/^[0-9]*$/i.test(e)}function tn(e){return"string"==typeof e&&!eM(e)&&!e0(e)}F({},{getSelector:()=>e8,getSelectorFromName:()=>e3,keccakBn:()=>e9,starknetKeccak:()=>e7}),F({},{decodeShortString:()=>tc,encodeShortString:()=>to,isASCII:()=>te,isDecimalString:()=>tr,isLongText:()=>ts,isShortString:()=>tt,isShortText:()=>ta,isText:()=>tn,splitLongString:()=>ti});var ta=e=>tn(e)&&tt(e),ts=e=>tn(e)&&!tt(e);function ti(e){let t=RegExp(`[^]{1,${ee}}`,"g");return e.match(t)||[]}function to(e){if(!te(e))throw Error(`${e} is not an ASCII string`);if(!tt(e))throw Error(`${e} is too long`);return q(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function tc(e){if(!te(e))throw Error(`${e} is not an ASCII string`);if(eM(e))return W(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(tr(e))return tc("0X".concat(BigInt(e).toString(16)));throw Error(`${e} is not Hex or decimal`)}F({},{felt:()=>tB,getAbiContractVersion:()=>tx,getArrayType:()=>tO,isCairo1Abi:()=>tR,isCairo1Type:()=>tN,isLen:()=>tf,isTypeArray:()=>ty,isTypeBool:()=>tA,isTypeContractAddress:()=>tI,isTypeEnum:()=>tb,isTypeEthAddress:()=>tw,isTypeFelt:()=>tg,isTypeLitteral:()=>tv,isTypeNamedTuple:()=>tE,isTypeOption:()=>tC,isTypeResult:()=>tT,isTypeStruct:()=>tm,isTypeTuple:()=>t_,isTypeUint:()=>tk,isTypeUint256:()=>tS,tuple:()=>t$,uint256:()=>tD}),F({},{UINT_128_MAX:()=>tl,UINT_256_MAX:()=>tu,bnToUint256:()=>tp,isUint256:()=>th,uint256ToBN:()=>td});var tl=(1n<<128n)-1n,tu=(1n<<256n)-1n;function td(e){return(eG(e.high)<<128n)+eG(e.low)}function th(e){return eG(e)<=tu}function tp(e){let t=eG(e);if(!th(t))throw Error("Number is too large");return{low:q((t&tl).toString(16)),high:q((t>>128n).toString(16))}}var tf=e=>/_len$/.test(e),tg=e=>"felt"===e||"core::felt252"===e,ty=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),t_=e=>/^\(.*\)$/i.test(e),tE=e=>/\(.*\)/i.test(e)&&e.includes(":"),tm=(e,t)=>e in t,tb=(e,t)=>e in t,tC=e=>e.startsWith("core::option::Option::"),tT=e=>e.startsWith("core::result::Result::"),tk=e=>Object.values(eC).includes(e),tv=e=>Object.values(eT).includes(e),tS=e=>"core::integer::u256"===e,tA=e=>"core::bool"===e,tI=e=>"core::starknet::contract_address::ContractAddress"===e,tw=e=>"core::starknet::eth_address::EthAddress"===e,tN=e=>e.includes("::"),tO=e=>tN(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function tR(e){let{cairo:t}=tx(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function tx(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>"function"===e.type&&(e.inputs.length||e.outputs.length));if(!t)return{cairo:void 0,compiler:void 0};let r=t.inputs.length?t.inputs:t.outputs;return tN(r[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var tD=e=>{let t=BigInt(e);if(!th(t))throw Error("Number is too large");return{low:(t&tl).toString(10),high:(t>>128n).toString(10)}},t$=(...e)=>({...e});function tB(e){if(eK(e)||"number"==typeof e&&Number.isInteger(e))return e.toString();if(tn(e)){if(!tt(e))throw Error(`${e} is a long string > 31 chars, felt can store short strings, split it to array of short strings`);let t=to(e);return BigInt(t).toString()}if("string"==typeof e&&eM(e))return BigInt(e).toString();if("string"==typeof e&&e0(e))return e;if("boolean"==typeof e)return`${+e}`;throw Error(`${e} can't be computed by felt()`)}var tP=class{constructor(e){let t=Object.values(e);if(0===t.length)throw Error("This Enum must have a least 1 variant");let r=t.filter(e=>void 0!==e).length;if(1!==r)throw Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){let e=Object.entries(this.variant),t=e.find(e=>void 0!==e[1]);if(void 0!==t)return t[1]}activeVariant(){let e=Object.entries(this.variant),t=e.find(e=>void 0!==e[1]);return void 0===t?"":t[0]}},tL=((S=tL||{})[S.Some=0]="Some",S[S.None=1]="None",S),tF=class{constructor(e,t){if(!(e in tL))throw Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(0===e){if(void 0===t)throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){if(!this.None)return this.Some}isSome(){return void 0!==this.Some}isNone(){return!0===this.None}},tV=((A=tV||{})[A.Ok=0]="Ok",A[A.Err=1]="Err",A),tU=class{constructor(e,t){if(!(e in tV))throw Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");0===e?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(void 0!==this.Ok)return this.Ok;if(void 0!==this.Err)return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return void 0!==this.Ok}isErr(){return void 0!==this.Err}},tH={isBN:(e,t,r)=>{if(!eK(e[r]))throw Error(`Data and formatter mismatch on ${r}:${t[r]}, expected response data ${r}:${e[r]} to be BN instead it is ${typeof e[r]}`)},unknown:(e,t,r)=>{throw Error(`Unhandled formatter type on ${r}:${t[r]} for data ${r}:${e[r]}`)}},tj=class{constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce((e,t)=>tf(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},tM=class{constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){let t=this.abi.find(e=>"interface"===e.type);return t.items.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}};function tG(e,t,r){return"constructor"===e&&!r&&!t.length}function tK(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],r="",n=0;for(;n<e.length;){if("("===e[n]){let a=1,s=n;for(n++;a;)")"===e[n]&&a--,"("===e[n]&&a++,n++;t.push(e.substring(s,n)),r+=" ",n--}else r+=e[n];n++}return{subTuple:t,result:r}}function tY(e){return tN(e)?function(e){let t=e.replace(/\s/g,"").slice(1,-1),{subTuple:r,result:n}=tK(t),a=n.split(",").map(e=>r.length?e.replace(" ",r.shift()):e);return a}(e):function(e){let t=e.replace(/\s/g,"").slice(1,-1),{subTuple:r,result:n}=tK(t),a=n.split(",").map(e=>r.length?e.replace(" ",r.shift()):e);return tE(e)&&(a=a.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),r=e.substring(t.length+1);return{name:t,type:r}}(t)),[])),a}(e)}function tW(e,t){if(!0===tS(e)){let e=tD(t);return[tB(e.low),tB(e.high)]}return tB(t)}function tq(e){if("object"==typeof e){let{low:t,high:r}=e;return[tB(t),tB(r)]}let t=tD(e);return[tB(t.low),tB(t.high)]}function tX(e,t,r,n){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){let a=[];a.push(tB(e.length));let s=tO(t);return e.reduce((e,t)=>e.concat(tX(t,s,r,n)),a)}if(r[t]&&r[t].members.length){if(tS(t))return tq(e);if("core::starknet::eth_address::EthAddress"===t)return tW(t,e);let{members:a}=r[t];return a.reduce((t,a)=>t.concat(tX(e[a.name],a.type,r,n)),[])}if(t_(t)){let a=function(e,t){let r=tY(t),n=Object.values(e);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${n} 
      expected: ${r}`);return r.map((e,t)=>({element:n[t],type:e.type??e}))}(e,t);return a.reduce((e,t)=>{let a=tX(t.element,t.type,r,n);return e.concat(a)},[])}if(tS(t))return tq(e);if(tb(t,n)){let{variants:a}=n[t];if(tC(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(void 0===t)throw Error("Error in abi : Option has no 'Some' variant.");let s=t.type;if("()"===s)return"0";let i=tX(e.unwrap(),s,r,n);return Array.isArray(i)?["0",...i]:["0",i]}return"1"}if(tT(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(void 0===t)throw Error("Error in abi : Result has no 'Ok' variant.");let s=t.type;if("()"===s)return"0";let i=tX(e.unwrap(),s,r,n);return Array.isArray(i)?["0",...i]:["0",i]}let t=a.find(e=>"Err"===e.name);if(void 0===t)throw Error("Error in abi : Result has no 'Err' variant.");let s=t.type;if("()"===s)return"1";let i=tX(e.unwrap(),s,r,n);return Array.isArray(i)?["1",...i]:["1",i]}let s=e.activeVariant(),i=a.find(e=>e.name===s);if(void 0===i)throw Error(`Not find in abi : Enum has no '${s}' variant.`);let o=i.type,c=a.findIndex(e=>e.name===s);if("()"===o)return c.toString();let l=tX(e.unwrap(),o,r,n);return Array.isArray(l)?[c.toString(),...l]:[c.toString(),l]}if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return tW(t,e)}function tJ(e,t){switch(!0){case tA(e):return!!BigInt(t.next().value);case tS(e):let r=t.next().value,n=t.next().value;return td({low:r,high:n});default:return BigInt(t.next().value)}}function tz(e,t,r,n){if("()"===t.type)return{};if(tS(t.type)){let t=e.next().value,r=e.next().value;return td({low:t,high:r})}if(ty(t.type)){let a=[],s={name:"",type:tO(t.type)},i=BigInt(e.next().value);for(;a.length<i;)a.push(tz(e,s,r,n));return a}if(r&&t.type in r&&r[t.type])return"core::starknet::eth_address::EthAddress"===t.type?tJ(t.type,e):r[t.type].members.reduce((t,a)=>(t[a.name]=tz(e,a,r,n),t),{});if(n&&t.type in n&&n[t.type]){let a=Number(e.next().value),s=n[t.type].variants.reduce((t,s,i)=>(i===a?t[s.name]=tz(e,{name:"",type:s.type},r,n):t[s.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=0===a?s.Some:void 0;return new tF(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=0===a?s.Ok:s.Err,new tU(a,e)}let i=new tP(s);return i}if(t_(t.type)){let a=tY(t.type);return a.reduce((t,a,s)=>{let i=a?.name?a.name:s,o=a?.type?a.type:a;return t[i]=tz(e,{name:i,type:o},r,n),t},{})}if(ty(t.type)){let a=[],s={name:"",type:tO(t.type)},i=BigInt(e.next().value);for(;a.length<i;)a.push(tz(e,s,r,n));return a}return tJ(t.type,e)}function tQ(e,t,r,n,a){let{name:s,type:i}=t;switch(!0){case tf(s):return BigInt(e.next().value);case r&&i in r||t_(i):case n&&tb(i,n):return tz(e,t,r,n);case ty(i):if(tN(i))return tz(e,t,r,n);let o=[];if(a&&a[`${s}_len`]){let i=a[`${s}_len`];for(;o.length<i;)o.push(tz(e,{name:s,type:t.type.replace("*","")},r,n))}return o;default:return tJ(i,e)}}var tZ=(e,t)=>{if(ej("string"==typeof e||"number"==typeof e||"bigint"==typeof e,`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),"string"==typeof e&&!eM(e))return;let r=BigInt(e.toString(10));ej(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},t0=(e,t)=>{"number"==typeof e&&ej(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),ej("string"==typeof e||"number"==typeof e||"bigint"==typeof e||"object"==typeof e&&"low"in e&&"high"in e,`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`);let r="object"==typeof e?td(e):eG(e);switch(t.type){case"core::integer::u8":ej(r>=0n&&r<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case"core::integer::u16":ej(r>=0n&&r<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case"core::integer::u32":ej(r>=0n&&r<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case"core::integer::u64":ej(r>=0n&&r<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case"core::integer::u128":ej(r>=0n&&r<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case"core::integer::u256":ej(r>=0n&&r<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} 0 - 2^256-1`);break;case"core::starknet::class_hash::ClassHash":case"core::starknet::contract_address::ContractAddress":ej(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)}},t1=(e,t)=>{ej("boolean"==typeof e,`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},t2=(e,t,r)=>{if("core::integer::u256"===t.type){t0(e,t);return}if("core::starknet::eth_address::EthAddress"===t.type){ej("object"!=typeof e,`EthAddress type is waiting a BigNumberish. Got ${e}`);let r=BigInt(e.toString(10));ej(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}ej("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as js object (not array)`),r[t.type].members.forEach(({name:r})=>{ej(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},t6=(e,t)=>{ej("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as js object (not array)`);let r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),n=[...Object.getOwnPropertyNames(e),...r];if(!(tC(t.type)&&n.includes("isSome")&&n.includes("isNone")||tT(t.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received ${e}, is not an Enum.`)},t5=(e,t)=>{ej("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},t4=(e,t,r,n)=>{let a=tO(t.type);if(!(tg(a)&&ts(e)))switch(ej(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case tg(a):e.forEach(e=>tZ(e,t));break;case t_(a):e.forEach(e=>t5(e,{name:t.name,type:a}));break;case ty(a):e.forEach(e=>t4(e,{name:"",type:a},r,n));break;case tm(a,r):e.forEach(e=>t2(e,{name:t.name,type:a},r));break;case tb(a,n):e.forEach(e=>t6(e,{name:t.name,type:a}));break;case tk(a)||tv(a):e.forEach(e=>t0(e,t));break;case tA(a):e.forEach(e=>t1(e,t));break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}};function t9(e,t,r,n){e.inputs.reduce((e,a)=>{let s=t[e];switch(!0){case tf(a.name):return e;case tg(a.type):tZ(s,a);break;case tk(a.type)||tv(a.type):t0(s,a);break;case tA(a.type):t1(s,a);break;case ty(a.type):t4(s,a,r,n);break;case tm(a.type,r):t2(s,a,r);break;case tb(a.type,n):t6(s,a);break;case t_(a.type):t5(s,a);break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${s}`)}return e+1},0)}var t7=class{constructor(e){this.structs=t7.getAbiStruct(e),this.enums=t7.getAbiEnum(e),this.parser=function(e){let t=e.find(e=>"interface"===e.type)?2:tR(e)?1:0;if(0===t||1===t)return new tj(e);if(2===t)return new tM(e);throw Error(`Unsupported ABI version ${t}`)}(e),this.abi=this.parser.getLegacyFormat()}validate(e,t,r=[]){if("DEPLOY"!==e){let r=this.abi.filter(t=>{if("function"!==t.type)return!1;let r="view"===t.stateMutability||"view"===t.state_mutability;return"INVOKE"===e?!r:r}).map(e=>e.name);ej(r.includes(t),`${"INVOKE"===e?"invocable":"viewable"} method not found in abi`)}let n=this.abi.find(r=>"DEPLOY"===e?r.name===t&&"constructor"===r.type:r.name===t&&"function"===r.type);if(tG(t,r,n))return;let a=this.parser.methodInputsLength(n);if(r.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${r.length}`);t9(n,r,this.structs,this.enums)}compile(e,t){let r;let n=this.abi.find(t=>t.name===e);if(tG(e,t,n))return[];if(Array.isArray(t))r=t;else{let e=function(e,t,r,n){let a=(e,t)=>{if(ty(t))return function(e,t){let r=tO(t);return"string"==typeof e?e:e.map(e=>a(e,r))}(e,t);if(tb(t,n)){let r=n[t];return i(e,r)}if(t_(t))return function(e,t){let r=tY(t),n=r.reduce((t,r,n)=>{var s;let i=Object.keys(e),o=r?.type?r.type:r;return s=a(e[i[n]],o),Object.defineProperty(t,n.toString(),{enumerable:!0,value:s??e[i[n]]}),t},{});return n}(e,t);if(tw(t))return e;if(tS(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:e.low,high:e.high}}if(tm(t,r)){let n=r[t].members;return s(e,n)}return e},s=(e,t)=>{let r=t.reduce((t,r)=>{var n;if("undefined"===e[r.name]&&(tN(r.type)||!tf(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);return n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n??e[r.name]}),t},{});return r},i=(e,t)=>{if(tT(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),n=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new tU(0,a(e.unwrap(),r)):new tU(1,a(e.unwrap(),n))}if(tC(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new tF(0,a(e.unwrap(),r)):new tF(1,{})}let r=Object.entries(e.variant),n=r.map(r=>{if(void 0===r[1])return r;let n=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===n?r:[r[0],a(e.unwrap(),n)]});return new tP(Object.fromEntries(n))},o=t.reduce((t,r)=>{var n;return tf(r.name)&&!tN(r.type)||(n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n})),t},{});return o}(t,n.inputs,this.structs,this.enums);t9(n,r=Object.values(e),this.structs,this.enums)}let a=r[Symbol.iterator](),s=n.inputs.reduce((e,t)=>tf(t.name)&&!tN(t.type)?e:e.concat(function(e,t,r,n){let{name:a,type:s}=t,{value:i}=e.next();switch(!0){case ty(s):if(!Array.isArray(i)&&!tn(i))throw Error(`ABI expected parameter ${a} to be array or long string, got ${i}`);return"string"==typeof i&&(i=ti(i)),tX(i,t.type,r,n);case"core::starknet::eth_address::EthAddress"===s:return tW(s,i);case tm(s,r)||t_(s)||tS(s):case tb(s,n):return tX(i,s,r,n);default:return tW(s,i)}}(a,t,this.structs,this.enums)),[]);return Object.defineProperty(s,"__compiled__",{enumerable:!1,writable:!1,value:!0}),s}static compile(e){let t;let r=e=>{let t=(e,r=".")=>{let n=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(n).flatMap(([e,a])=>{let s=a;"entrypoint"===e?s=e3(s):ts(s)&&(s=ti(s));let i=Array.isArray(n)&&"0"===e?"$$len":e;if(eK(s))return[[`${r}${i}`,tB(s)]];if(Object(s)===s){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),n=[...Object.getOwnPropertyNames(s),...e];if(n.includes("isSome")&&n.includes("isNone")){let e=s,n=e.isSome()?0:1;return e.isSome()?t({0:n,1:e.unwrap()},`${r}${i}.`):[[`${r}${i}`,tB(n)]]}if(n.includes("isOk")&&n.includes("isErr")){let e=s,n=e.isOk()?0:1;return t({0:n,1:e.unwrap()},`${r}${i}.`)}if(n.includes("variant")&&n.includes("activeVariant")){let e=s,n=e.activeVariant(),a=Object.keys(e.variant),o=a.findIndex(e=>e===n);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${r}${i}`,tB(o)]]:t({0:o,1:e.unwrap()},`${r}${i}.`)}return t(s,`${r}${i}.`)}return[[`${r}${i}`,tB(s)]]})},r=Object.fromEntries(t(e));return r};if(Array.isArray(e)){let n={...e},a=r(n);t=Object.values(a)}else{let n=r(e);t=Object.values(n)}return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:r}=this.abi.find(t=>t.name===e),n=t.flat()[Symbol.iterator](),a=r.flat().reduce((e,t,r)=>{let a=t.name??r;return e[a]=tQ(n,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,r){let n=this.parse(e,t);return function e(t,r,n){return Object.entries(t).reduce((a,[s,i])=>{let o=n??r[s];if(!(s in r)&&!n)return a[s]=i,a;if("string"===o){if(Array.isArray(t[s])){let r=e(t[s],t[s].map(e=>o));return a[s]=Object.values(r).join(""),a}return tH.isBN(t,r,s),a[s]=tc(i),a}if("number"===o)return tH.isBN(t,r,s),a[s]=Number(i),a;if("function"==typeof o)return a[s]=o(i),a;if(Array.isArray(o)){let r=e(t[s],o,o[0]);return a[s]=Object.values(r),a}return"object"==typeof o?a[s]=e(t[s],o):tH.unknown(t,r,s),a},{})}(n,r)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(e=[]){return t7.compile(e)}static toHex(e=[]){let t=t7.compile(e);return t.map(e=>eY(e))}};F({},{calculateContractAddressFromHash:()=>rf,calculateDeclareTransactionHash:()=>rd,calculateDeployAccountTransactionHash:()=>rh,calculateDeployTransactionHash:()=>ru,calculateTransactionHash:()=>rp,calculateTransactionHashCommon:()=>rl,computeCompiledClassHash:()=>rb,computeContractClassHash:()=>rk,computeHashOnElements:()=>rc,computeLegacyContractClassHash:()=>rE,computeSierraContractClassHash:()=>rT,default:()=>r_,feeTransactionVersion:()=>rs,feeTransactionVersion_2:()=>ri,formatSpaces:()=>ry,getSelector:()=>e8,getSelectorFromName:()=>e3,getVersionsByType:()=>ro,keccakBn:()=>e9,poseidon:()=>D,starknetKeccak:()=>e7,transactionVersion:()=>rn,transactionVersion_2:()=>ra}),F({},{starkCurve:()=>O,weierstrass:()=>R}),F({},{parse:()=>t8,parseAlwaysAsBig:()=>re,stringify:()=>rt,stringifyAlwaysAsBig:()=>rr});var t3=e=>{if(!x.U(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},t8=e=>x.Qc(String(e),void 0,t3),re=e=>x.Qc(String(e),void 0,x.A7),rt=(e,t,r,n)=>x.Pz(e,t,r,n),rr=rt,rn=en,ra=ea,rs=es,ri=ei;function ro(e){return"fee"===e?{v1:rs,v2:ri}:{v1:rn,v2:ra}}function rc(e){return[...e,e.length].reduce((e,t)=>O.pedersen(eG(e),eG(t)),0).toString()}function rl(e,t,r,n,a,s,i,o=[]){let c=rc(a),l=[e,t,r,n,c,s,i,...o];return rc(l)}function ru(e,t,r,n,a="constructor"){return rl("0x6465706c6f79",r,e,e3(a),t,0,n)}function rd(e,t,r,n,a,s,i){return rl("0x6465636c617265",r,t,0,[e],n,a,[s,...i?[i]:[]])}function rh(e,t,r,n,a,s,i,o){let c=[t,n,...r];return rl("0x6465706c6f795f6163636f756e74",a,e,0,c,s,i,[o])}function rp(e,t,r,n,a,s){return rl("0x696e766f6b65",t,e,0,r,n,a,[s])}function rf(e,t,r,n){let a=t7.compile(r),s=rc(a),i=tB("0x535441524b4e45545f434f4e54524143545f41444452455353"),o=rc([i,n,e,t,s]);return eY(BigInt(o)%ed)}function rg(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function ry(e){let t=!1,r=[];for(let n of e)'"'===n&&!1==(r.length>0&&"\\"===r.slice(-1)[0])&&(t=!t),t?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function r_(e){let{abi:t,program:r}=e,n=ry(rt({abi:t,program:r},rg));return q(O.keccak(j(n)).toString(16))}function rE(e){let t="string"==typeof e?t8(e):e,r=eY(el),n=rc(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=rc(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),s=rc(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),i=rc(t.program.builtins.map(e=>to(e))),o=r_(t),c=rc(t.program.data);return rc([r,n,a,s,i,o,c])}function rm(e){let t=e.flatMap(e=>{var t;return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,O.poseidonHashMany)(t.flatMap(e=>BigInt(to(e)))))]});return(0,O.poseidonHashMany)(t)}function rb(e){let t=BigInt(to("COMPILED_CLASS_V1")),r=rm(e.entry_points_by_type.EXTERNAL),n=rm(e.entry_points_by_type.L1_HANDLER),a=rm(e.entry_points_by_type.CONSTRUCTOR),s=(0,O.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return eY((0,O.poseidonHashMany)([t,r,n,a,s]))}function rC(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,O.poseidonHashMany)(t)}function rT(e){let t=BigInt(to("CONTRACT_CLASS_V0.1.0")),r=rC(e.entry_points_by_type.EXTERNAL),n=rC(e.entry_points_by_type.L1_HANDLER),a=rC(e.entry_points_by_type.CONSTRUCTOR),s=function(e){let t=ry(rt(e.abi,null));return BigInt(q(O.keccak(j(t)).toString(16)))}(e),i=(0,O.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return eY((0,O.poseidonHashMany)([t,r,n,a,s,i]))}function rk(e){let t="string"==typeof e?t8(e):e;return"sierra_program"in t?rT(t):rE(t)}function rv(e){let t="string"==typeof e?e:rt(e),r=(0,$.iv)(t);return K(r)}function rS(e){if(Array.isArray(e))return e;let t=H((0,$.ec)(G(e)));return t8(t)}function rA(){let e=O.utils.randomPrivateKey();return(0,O.getStarkKey)(e)}function rI(e){return q(e).toLowerCase()}function rw(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>eY(e));try{let{r:t,s:r}=e;return[eY(t),eY(r)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function rN(e){return eQ(rw(e))}function rO(e){return eZ(rw(e))}function rR(e,t=.5){return eG(e)*eG(Math.round((1+t)*100))/100n}function rx(e){let t="string"==typeof e?t8(e):e;return"sierra_program"in t}F({},{compressProgram:()=>rv,decompressProgram:()=>rS,estimatedFeeToMaxFee:()=>rR,formatSignature:()=>rw,makeAddress:()=>rI,randomAddress:()=>rA,signatureToDecimalArray:()=>rN,signatureToHexArray:()=>rO});var rD="undefined"!=typeof window&&window.fetch||"undefined"!=typeof global&&global.fetch||B;function r$(e){return new Promise(t=>{setTimeout(t,e)})}function rB(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=ry(rt(e.abi)),t.sierra_program=ry(rt(e.sierra_program)),t.sierra_program=rv(t.sierra_program),t}function rP(e){let t="string"==typeof e?t8(e):e;return rx(e)?rB(t):{...t,..."program"in t&&{program:rv(t.program)}}}F({},{createSierraContractClass:()=>rB,parseContract:()=>rP,wait:()=>r$});var rL=class{parseGetBlockResponse(e){return{timestamp:e.timestamp,block_hash:"block_hash"in e?e.block_hash:"",block_number:"block_number"in e?e.block_number:-1,new_root:"new_root"in e?e.new_root:"",parent_hash:e.parent_hash,status:"status"in e?e.status:"PENDING",transactions:e.transactions}}parseGetTransactionResponse(e){return{calldata:"calldata"in e?e.calldata:[],contract_address:"contract_address"in e?e.contract_address:"",sender_address:"sender_address"in e?e.sender_address:"",max_fee:"max_fee"in e?e.max_fee:"",nonce:"nonce"in e?e.nonce:"",signature:"signature"in e?e.signature:[],transaction_hash:e.transaction_hash,version:e.version}}parseFeeEstimateResponse(e){return{overall_fee:eG(e[0].overall_fee),gas_consumed:eG(e[0].gas_consumed),gas_price:eG(e[0].gas_price)}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:eG(e.overall_fee),gas_consumed:eG(e.gas_consumed),gas_price:eG(e.gas_price)}))}parseCallContractResponse(e){return{result:e}}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:rR(BigInt(e.fee_estimation.overall_fee))}))}parseContractClassResponse(e){return{...e,abi:"string"==typeof e.abi?JSON.parse(e.abi):e.abi}}},rF=class extends Error{constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){let{setPrototypeOf:r}=Object;r?r(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){let{captureStackTrace:r}=Error;r&&r(e,t)}(this)}},rV=class extends rF{},rU=class extends rV{constructor(e,t){super(e),this.errorCode=t}},rH=class extends rV{constructor(e,t){super(e),this.errorCode=t}};F({},{StarknetIdContract:()=>rz,getStarknetIdContract:()=>rQ,useDecoded:()=>rX,useEncoded:()=>rJ});var rj="abcdefghijklmnopqrstuvwxyz0123456789-",rM=BigInt(rj.length+1),rG="这来",rK=BigInt(rj.length),rY=BigInt(rG.length),rW=BigInt(rG.length+1);function rq(e){let t=0;for(;e.endsWith(rG[rG.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function rX(e){let t="";return(e.forEach(e=>{for(;e!==eo;){let r=e%rM;if(e/=rM,r===BigInt(rj.length)){let r=e/rW;if(r===eo){let n=e%rW;e=r,n===eo?t+=rj[0]:t+=rG[Number(n)-1]}else{let r=e%rY;t+=rG[Number(r)],e/=rY}}else t+=rj[Number(r)]}let[r,n]=rq(t);n&&(t=r+(n%2==0?rG[rG.length-1].repeat(n/2-1)+rG[0]+rj[1]:rG[rG.length-1].repeat((n-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function rJ(e){let t=BigInt(0),r=BigInt(1);if(e.endsWith(rG[0]+rj[1])){let[t,r]=rq(e.substring(0,e.length-2));e=t+rG[rG.length-1].repeat(2*(r+1))}else{let[t,r]=rq(e);r&&(e=t+rG[rG.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){let a=e[n],s=rj.indexOf(a),i=BigInt(rj.indexOf(a));if(-1!==s)n===e.length-1&&e[n]===rj[0]?(t+=r*rK,r*=rM*rM):(t+=r*i,r*=rM);else if(-1!==rG.indexOf(a)){t+=r*rK,r*=rM;let s=(n===e.length-1?1:0)+rG.indexOf(a);t+=r*BigInt(s),r*=rY}}return t}var rz=((I=rz||{}).MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",I.TESTNET="0x3bab268e932d2cecd1946f100ae67ce3dff9fd234119ea2f6da57d16d29fce",I);function rQ(e){switch(e){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f474f45524c49":return"0x3bab268e932d2cecd1946f100ae67ce3dff9fd234119ea2f6da57d16d29fce";default:throw Error("Starknet.id is not yet deployed on this network")}}async function rZ(e,t,r){let n=await e.getChainId(),a=r??rQ(n);try{let r=await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:t7.compile({address:t})}),n=r.result.map(e=>BigInt(e)).slice(1),s=rX(n);if(!s)throw Error("Starkname not found");return s}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}async function r0(e,t,r){let n=await e.getChainId(),a=r??rQ(n);try{let r=await e.callContract({contractAddress:a,entrypoint:"domain_to_address",calldata:t7.compile({domain:[rJ(t.replace(".stark","")).toString(10)]})});return r.result[0]}catch{throw Error("Could not get address from stark name")}}var r1=Object.values(eN),r2=class{constructor(e){this.hash=null,this.number=null,this.tag=null,this.valueOf=()=>this.number,this.toString=()=>this.hash,this.setIdentifier(e)}setIdentifier(e){"string"==typeof e&&eM(e)?this.hash=e:"bigint"==typeof e?this.hash=eY(e):"number"==typeof e?this.number=e:"string"==typeof e&&r1.includes(e)?this.tag=e:this.tag="pending"}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}get sequencerIdentifier(){return null!==this.hash?{blockHash:this.hash}:{blockNumber:this.number??this.tag}}},r6=(e,t=!1,r=e_)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");let n=eE[e??"SN_GOERLI"],a=Math.floor(Math.random()*n.length);return`${n[a]}${r}`},r5={headers:{"Content-Type":"application/json"},blockIdentifier:"pending",retries:200},r4=class{constructor(e){this.responseParser=new rL,this.getBlockHashAndNumber=this.getBlockLatestAccepted,this.getStateUpdate=this.getBlockStateUpdate,this.traceBlockTransactions=this.getBlockTransactionsTraces,this.getTransactionCount=this.getBlockTransactionCount,this.traceTransaction=this.getTransactionTrace,this.getSimulateTransaction=this.simulateTransaction;let{nodeUrl:t,retries:r,headers:n,blockIdentifier:a,chainId:s,rpcVersion:i}=e||{};Object.values(ep).includes(t)?this.nodeUrl=r6(t,e?.default,i):t?this.nodeUrl=t:this.nodeUrl=r6(void 0,e?.default,i),this.retries=r||r5.retries,this.headers={...r5.headers,...n},this.blockIdentifier=a||r5.blockIdentifier,this.chainId=s}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return rD(this.nodeUrl,{method:"POST",body:rt(n),headers:this.headers})}errorHandler(e,t,r,n){if(r){let{code:n,message:a,data:s}=r;throw new rV(`RPC: ${e} with params ${rt(t)}
 ${n}: ${a}: ${rt(s)}`)}if(n instanceof rV)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{let r=await this.fetch(e,t),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async getNonceForAddress(e,t=this.blockIdentifier){let r=eY(e),n=new r2(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}async getBlock(e=this.blockIdentifier){return this.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}async getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}async getBlockWithTxHashes(e=this.blockIdentifier){let t=new r2(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}async getBlockWithTxs(e=this.blockIdentifier){let t=new r2(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}async getBlockStateUpdate(e=this.blockIdentifier){let t=new r2(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}async getBlockTransactionsTraces(e=this.blockIdentifier){let t=new r2(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}async getBlockTransactionCount(e=this.blockIdentifier){let t=new r2(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}async getPendingTransactions(){let{transactions:e}=await this.getBlock("pending");return Promise.all(e.map(e=>this.getTransactionByHash(e)))}async getTransaction(e){return this.getTransactionByHash(e).then(this.responseParser.parseGetTransactionResponse)}async getTransactionByHash(e){let t=eY(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}async getTransactionByBlockIdAndIndex(e,t){let r=new r2(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}async getTransactionReceipt(e){let t=eY(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}async getTransactionTrace(e){let t=eY(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}async getTransactionStatus(e){let t=eY(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}async simulateTransaction(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!1,skipFeeCharge:n=!0}){let a=new r2(t).identifier,s=[];return r&&s.push(eO.ESimulationFlag.SKIP_VALIDATE),n&&s.push(eO.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s}).then(this.responseParser.parseSimulateTransactionResponse)}async waitForTransaction(e,t){let r;let n=eY(e),{retries:a}=this,s=!1,i=!1,o=t?.retryInterval??5e3,c=t?.errorStates??[eO.ETransactionStatus.REJECTED],l=t?.successStates??[eO.ETransactionExecutionStatus.SUCCEEDED,eO.ETransactionStatus.ACCEPTED_ON_L2,eO.ETransactionStatus.ACCEPTED_ON_L1];for(;!s;){await r$(o);try{r=await this.getTransactionStatus(n);let e=r.execution_status,t=r.finality_status;if(!t){let e=Error("waiting for transaction status");throw e}if(c.includes(e)||c.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,i=!0,a}(l.includes(e)||l.includes(t))&&(s=!0)}catch(e){if(e instanceof Error&&i)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(n)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await r$(o)}return u}async getStorageAt(e,t,r=this.blockIdentifier){let n=eY(e),a=eq(t),s=new r2(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:s})}async getClassHashAt(e,t=this.blockIdentifier){let r=eY(e),n=new r2(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}async getClassByHash(e){return this.getClass(e)}async getClass(e,t=this.blockIdentifier){let r=eY(e),n=new r2(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n}).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t=this.blockIdentifier){let r=eY(e),n=new r2(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r}).then(this.responseParser.parseContractClassResponse)}async getCode(e,t){throw Error("RPC does not implement getCode function")}async getContractVersion(e,t,{blockIdentifier:r=this.blockIdentifier,compiler:n=!0}={}){let a;if(e)a=await this.getClassAt(e,r);else if(t)a=await this.getClass(t,r);else throw Error("getContractVersion require contractAddress or classHash");if(rx(a)){if(n){let e=tx(a.abi);return{cairo:"1",compiler:e.compiler}}return{cairo:"1",compiler:void 0}}return{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,r=this.blockIdentifier){return this.getInvokeEstimateFee(e,t,r)}async getInvokeEstimateFee(e,t,r=this.blockIdentifier){let n=new r2(r).identifier,a=this.buildTransaction({type:"INVOKE_FUNCTION",...e,...t},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[a],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getDeclareEstimateFee(e,t,r=this.blockIdentifier){let n=new r2(r).identifier,a=this.buildTransaction({type:"DECLARE",...e,...t},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[a],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getDeployAccountEstimateFee(e,t,r=this.blockIdentifier){let n=new r2(r).identifier,a=this.buildTransaction({type:"DEPLOY_ACCOUNT",...e,...t},"fee");return this.fetchEndpoint("starknet_estimateFee",{request:[a],block_id:n}).then(this.responseParser.parseFeeEstimateResponse)}async getEstimateFeeBulk(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!1}){r&&console.warn("getEstimateFeeBulk RPC does not support skipValidate");let n=new r2(t).identifier;return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n}).then(this.responseParser.parseFeeEstimateBulkResponse)}async invokeFunction(e,t){return this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:t7.toHex(e.calldata),type:eO.ETransactionType.INVOKE,max_fee:eY(t.maxFee||0),version:"0x1",signature:rO(e.signature),nonce:eY(t.nonce)}})}async declareContract({contract:e,signature:t,senderAddress:r,compiledClassHash:n},a){return rx(e)?this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:eO.ETransactionType.DECLARE,contract_class:{sierra_program:rS(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:er,max_fee:eY(a.maxFee||0),signature:rO(t),sender_address:r,nonce:eY(a.nonce)}}):this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:eO.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:et,max_fee:eY(a.maxFee||0),signature:rO(t),sender_address:r,nonce:eY(a.nonce)}})}async deployAccountContract({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){return this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:t7.toHex(t||[]),class_hash:eY(e),contract_address_salt:eY(r||0),type:eO.ETransactionType.DEPLOY_ACCOUNT,max_fee:eY(a.maxFee||0),version:eY(a.version||0),signature:rO(n),nonce:eY(a.nonce)}})}async callContract(e,t=this.blockIdentifier){let r=new r2(t).identifier,n=await this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:e3(e.entrypoint),calldata:t7.toHex(e.calldata)},block_id:r});return this.responseParser.parseCallContractResponse(n)}async estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:s}=e,i={from_address:eY(r),to_address:eY(n),entry_point_selector:e8(a),payload:e6(s)},o=new r2(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:i,block_id:o})}async getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}async getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}async getStarkName(e,t){return rZ(this,e,t)}async getAddressFromStarkName(e,t){return r0(this,e,t)}buildTransaction(e,t){let r=ro(t),n={signature:rO(e.signature),nonce:eY(e.nonce),max_fee:eY(e.maxFee||0)};if("INVOKE_FUNCTION"===e.type)return{type:eO.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:t7.toHex(e.calldata),version:eY(e.version||r.v1),...n};if("DECLARE"===e.type)return rx(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:rS(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:eY(e.version||r.v2),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:eY(e.version||r.v1),...n};if("DEPLOY_ACCOUNT"===e.type)return{type:e.type,constructor_calldata:t7.toHex(e.constructorCalldata||[]),class_hash:eY(e.classHash),contract_address_salt:eY(e.addressSalt||0),version:eY(e.version||r.v1),...n};throw Error("RPC buildTransaction received unknown TransactionType")}},r9=class{},r7=class extends r9{parseGetBlockResponse(e){return{...e,new_root:e.state_root,parent_hash:e.parent_block_hash,transactions:Object.values(e.transactions).map(e=>"transaction_hash"in e&&e.transaction_hash).filter(Boolean)}}parseGetTransactionResponse(e){if("NOT_RECEIVED"===e.status&&"NOT_RECEIVED"===e.finality_status)throw new rV;return{...e,calldata:"calldata"in e.transaction?e.transaction.calldata:[],contract_class:"contract_class"in e.transaction?e.transaction.contract_class:void 0,entry_point_selector:"entry_point_selector"in e.transaction?e.transaction.entry_point_selector:void 0,max_fee:"max_fee"in e.transaction?e.transaction.max_fee:void 0,nonce:e.transaction.nonce,sender_address:"sender_address"in e.transaction?e.transaction.sender_address:void 0,signature:"signature"in e.transaction?e.transaction.signature:void 0,transaction_hash:"transaction_hash"in e.transaction?e.transaction.transaction_hash:void 0,version:"version"in e.transaction?e.transaction.version:void 0}}parseGetTransactionReceiptResponse(e){return{...e,messages_sent:e.l2_to_l1_messages,..."revert_error"in e&&{revert_reason:e.revert_error}}}parseFeeEstimateResponse(e){if("overall_fee"in e){let t={};try{t={gas_consumed:eG(e.gas_usage),gas_price:eG(e.gas_price)}}catch{}return{overall_fee:eG(e.overall_fee),...t}}return{overall_fee:eG(e.amount)}}parseFeeEstimateBulkResponse(e){return[].concat(e).map(e=>{if("overall_fee"in e){let t={};try{t={gas_consumed:eG(e.gas_usage),gas_price:eG(e.gas_price)}}catch{}return{overall_fee:eG(e.overall_fee),...t}}return{overall_fee:eG(e.amount)}})}parseSimulateTransactionResponse(e){let t="overall_fee"in e.fee_estimation?e.fee_estimation.overall_fee:e.fee_estimation.amount;return[{transaction_trace:e.trace,fee_estimation:e.fee_estimation,suggestedMaxFee:rR(BigInt(t))}]}parseCallContractResponse(e){return{result:e.result}}parseInvokeFunctionResponse(e){return{transaction_hash:e.transaction_hash}}parseDeployContractResponse(e){return{transaction_hash:e.transaction_hash,contract_address:e.address}}parseDeclareContractResponse(e){return{transaction_hash:e.transaction_hash,class_hash:e.class_hash}}parseGetStateUpdateResponse(e){let t=Object.entries(e.state_diff.nonces).map(([e,t])=>({contract_address:e,nonce:t})),r=Object.entries(e.state_diff.storage_diffs).map(([e,t])=>({address:e,storage_entries:t}));return{...e,state_diff:{...e.state_diff,storage_diffs:r,nonces:t}}}parseContractClassResponse(e){let t=rx(e)?e:rP(e);return{...t,abi:"string"==typeof t.abi?JSON.parse(t.abi):t.abi}}},r3=/^(?:\w+:)?\/\/(\S+)$/,r8=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,ne=/^[^\s.]+\.\S{2,}$/;function nt(e,t,r){return!function(e){if(!e||"string"!=typeof e)return!1;let t=e.match(r3);if(!t)return!1;let r=t[1];return!!r&&!!(r8.test(r)||ne.test(r))}(r)?P(e,r??t):r}var nr={network:"SN_GOERLI",blockIdentifier:"pending"},nn=class{constructor(e=nr){this.responseParser=new r7,"network"in e?(this.baseUrl=nn.getNetworkFromName(e.network),this.feederGatewayUrl=nt(this.baseUrl,"feeder_gateway"),this.gatewayUrl=nt(this.baseUrl,"gateway")):(this.baseUrl=e.baseUrl,this.feederGatewayUrl=nt(this.baseUrl,"feeder_gateway",e.feederGatewayUrl),this.gatewayUrl=nt(this.baseUrl,"gateway",e.gatewayUrl)),this.chainId=e?.chainId??nn.getChainIdFromBaseUrl(this.baseUrl),this.headers=e.headers,this.blockIdentifier=e?.blockIdentifier||nr.blockIdentifier}static getNetworkFromName(e){switch(e){case"SN_MAIN":case"0x534e5f4d41494e":return"https://alpha-mainnet.starknet.io";case"SN_GOERLI":case"0x534e5f474f45524c49":return"https://alpha4.starknet.io";default:throw Error("Could not detect base url from NetworkName")}}static getChainIdFromBaseUrl(e){try{let t=new URL(e);if(t.host.includes("mainnet.starknet.io"))return"0x534e5f4d41494e";return"0x534e5f474f45524c49"}catch{return console.error(`Could not parse baseUrl: ${e}`),"0x534e5f474f45524c49"}}getFetchUrl(e){return["add_transaction"].includes(e)?this.gatewayUrl:this.feederGatewayUrl}getFetchMethod(e){return["add_transaction","call_contract","estimate_fee","estimate_message_fee","estimate_fee_bulk","simulate_transaction"].includes(e)?"POST":"GET"}getQueryString(e){if(void 0===e||0===Object.keys(e).length||1===Object.keys(e).length&&Object.entries(e).every(([e,t])=>"blockIdentifier"===e&&null===t))return"";let t=Object.entries(e).map(([e,t])=>{if("blockIdentifier"===e){let e=new r2(t);return`${e.queryIdentifier}`}return`${e}=${t}`}).join("&");return`?${t}`}getHeaders(e){return"POST"===e?{"Content-Type":"application/json",...this.headers}:this.headers}async fetchEndpoint(e,...[t,r]){let n=this.getFetchUrl(e),a=this.getFetchMethod(e),s=this.getQueryString(t),i=P(n,e,s);return this.fetch(i,{method:a,body:r})}async fetch(e,t){let r=nt(this.baseUrl,"",e),n=t?.method??"GET",a=this.getHeaders(n),s=rt(t?.body);try{let e=await rD(r,{method:n,body:s,headers:a}),i=await e.text();if(!e.ok){let t;try{t=t8(i)}catch{throw new rH(e.statusText,e.status)}throw new rU(t.message,t.code)}let o=t?.parseAlwaysAsBigInt?re:t8;return o(i)}catch(e){if(e instanceof Error&&!(e instanceof rV))throw Error(`Could not ${n} from endpoint \`${r}\`: ${e.message}`);throw e}}async getChainId(){return Promise.resolve(this.chainId)}async callContract({contractAddress:e,entrypoint:t,calldata:r=[]},n=this.blockIdentifier){return this.fetchEndpoint("call_contract",{blockIdentifier:n},{contract_address:e,entry_point_selector:e3(t),calldata:t7.compile(r)}).then(this.responseParser.parseCallContractResponse)}async getBlock(e=this.blockIdentifier){return this.fetchEndpoint("get_block",{blockIdentifier:e}).then(this.responseParser.parseGetBlockResponse)}async getNonceForAddress(e,t=this.blockIdentifier){return this.fetchEndpoint("get_nonce",{contractAddress:e,blockIdentifier:t})}async getStorageAt(e,t,r=this.blockIdentifier){let n=eG(t).toString(10);return this.fetchEndpoint("get_storage_at",{blockIdentifier:r,contractAddress:e,key:n})}async getTransaction(e){let t=eY(e);return this.fetchEndpoint("get_transaction",{transactionHash:t}).then(e=>{if(1===Object.values(e).length)throw new rV(e.status);return this.responseParser.parseGetTransactionResponse(e)})}async getTransactionReceipt(e){let t=eY(e);return this.fetchEndpoint("get_transaction_receipt",{transactionHash:t}).then(this.responseParser.parseGetTransactionReceiptResponse)}async getClassAt(e,t=this.blockIdentifier){return this.fetchEndpoint("get_full_contract",{blockIdentifier:t,contractAddress:e}).then(this.responseParser.parseContractClassResponse)}async getClassHashAt(e,t=this.blockIdentifier){return this.fetchEndpoint("get_class_hash_at",{blockIdentifier:t,contractAddress:e})}async getClassByHash(e,t=this.blockIdentifier){return this.fetchEndpoint("get_class_by_hash",{classHash:e,blockIdentifier:t}).then(this.responseParser.parseContractClassResponse)}async getCompiledClassByClassHash(e,t=this.blockIdentifier){return this.fetchEndpoint("get_compiled_class_by_class_hash",{classHash:e,blockIdentifier:t})}async getContractVersion(e,t,{blockIdentifier:r=this.blockIdentifier,compiler:n=!0}={}){let a;if(e)a=await this.getClassAt(e,r);else if(t)a=await this.getClassByHash(t,r);else throw Error("getContractVersion require contractAddress or classHash");if(rx(a)){if(n){let e=tx(a.abi);return{cairo:"1",compiler:e.compiler}}return{cairo:"1",compiler:void 0}}return{cairo:"0",compiler:"0"}}async invokeFunction(e,t){return this.fetchEndpoint("add_transaction",void 0,{type:"INVOKE_FUNCTION",sender_address:e.contractAddress,calldata:t7.compile(e.calldata??[]),signature:rN(e.signature),nonce:eY(t.nonce),max_fee:eY(t.maxFee||0),version:"0x1"}).then(this.responseParser.parseInvokeFunctionResponse)}async deployAccountContract({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){return this.fetchEndpoint("add_transaction",void 0,{type:"DEPLOY_ACCOUNT",contract_address_salt:r??rA(),constructor_calldata:t7.compile(t??[]),class_hash:eY(e),max_fee:eY(a.maxFee||0),version:eY(a.version||0),nonce:eY(a.nonce),signature:rN(n)}).then(this.responseParser.parseDeployContractResponse)}async declareContract({senderAddress:e,contract:t,signature:r,compiledClassHash:n},a){return rx(t)?this.fetchEndpoint("add_transaction",void 0,{type:"DECLARE",sender_address:e,compiled_class_hash:n,contract_class:t,nonce:eY(a.nonce),signature:rN(r),max_fee:eY(a.maxFee||0),version:eY(ra)}).then(this.responseParser.parseDeclareContractResponse):this.fetchEndpoint("add_transaction",void 0,{type:"DECLARE",contract_class:t,nonce:eY(a.nonce),signature:rN(r),sender_address:e,max_fee:eY(a.maxFee||0),version:eY(rn)}).then(this.responseParser.parseDeclareContractResponse)}async getEstimateFee(e,t,r=this.blockIdentifier,n=!1){return this.getInvokeEstimateFee(e,t,r,n)}async getInvokeEstimateFee(e,t,r=this.blockIdentifier,n=!1){let a=this.buildTransaction({type:"INVOKE_FUNCTION",...e,...t},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},a).then(this.responseParser.parseFeeEstimateResponse)}async getDeclareEstimateFee(e,t,r=this.blockIdentifier,n=!1){let a=this.buildTransaction({type:"DECLARE",...e,...t},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},a).then(this.responseParser.parseFeeEstimateResponse)}async getDeployAccountEstimateFee(e,t,r=this.blockIdentifier,n=!1){let a=this.buildTransaction({type:"DEPLOY_ACCOUNT",...e,...t},"fee");return this.fetchEndpoint("estimate_fee",{blockIdentifier:r,skipValidate:n},a).then(this.responseParser.parseFeeEstimateResponse)}async getEstimateFeeBulk(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!1}){let n=e.map(e=>this.buildTransaction(e,"fee"));return this.fetchEndpoint("estimate_fee_bulk",{blockIdentifier:t,skipValidate:r},n).then(this.responseParser.parseFeeEstimateBulkResponse)}async getCode(e,t=this.blockIdentifier){return this.fetchEndpoint("get_code",{contractAddress:e,blockIdentifier:t})}async waitForTransaction(e,t){let r;let n=!1,a=0,s=t?.retryInterval??5e3,i=t?.errorStates??["REJECTED","NOT_RECEIVED","REVERTED"],o=t?.successStates??["SUCCEEDED","ACCEPTED_ON_L1","ACCEPTED_ON_L2"];for(;!n;)if(await r$(s),"NOT_RECEIVED"===(r=await this.getTransactionStatus(e)).finality_status&&a<3)a+=1;else if(o.includes(r.finality_status)||o.includes(r.execution_status))n=!0;else if(i.includes(r.finality_status)||i.includes(r.execution_status)){let e;e=r.tx_failure_reason?`${r.tx_status}: ${r.tx_failure_reason.code}
${r.tx_failure_reason.error_message}`:r.tx_revert_reason?`${r.tx_status}: ${r.tx_revert_reason}`:r.tx_status;let t=Error(e);throw t.response=r,t}let c=await this.getTransactionReceipt(e);return c}async getTransactionStatus(e){let t=eY(e);return this.fetchEndpoint("get_transaction_status",{transactionHash:t})}async getContractAddresses(){return this.fetchEndpoint("get_contract_addresses")}async getTransactionTrace(e){let t=eY(e);return this.fetchEndpoint("get_transaction_trace",{transactionHash:t})}async estimateMessageFee({from_address:e,to_address:t,entry_point_selector:r,payload:n},a=this.blockIdentifier){let s={from_address:e1(e),to_address:e2(t),entry_point_selector:e8(r),payload:e6(n)};return this.fetchEndpoint("estimate_message_fee",{blockIdentifier:a},s)}async getSimulateTransaction(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!1,skipExecute:n=!1}){e.length>1&&console.warn("Sequencer simulate process only first element from invocations list"),n&&console.warn("Sequencer can't skip account __execute__");let a=this.buildTransaction(e[0]);return this.fetchEndpoint("simulate_transaction",{blockIdentifier:t,skipValidate:r??!1},a).then(this.responseParser.parseSimulateTransactionResponse)}async getStateUpdate(e=this.blockIdentifier){let t=new r2(e).sequencerIdentifier;return this.fetchEndpoint("get_state_update",{...t}).then(this.responseParser.parseGetStateUpdateResponse)}async getBlockTraces(e=this.blockIdentifier){let t=new r2(e).sequencerIdentifier;return this.fetchEndpoint("get_block_traces",{...t})}async getStarkName(e,t){return rZ(this,e,t)}async getAddressFromStarkName(e,t){return r0(this,e,t)}buildTransaction(e,t){let r=ro(t),n={signature:rN(e.signature),nonce:eY(e.nonce)};if("INVOKE_FUNCTION"===e.type)return{type:e.type,sender_address:e.contractAddress,calldata:t7.compile(e.calldata??[]),version:eY(e.version||r.v1),...n};if("DECLARE"===e.type)return rx(e.contract)?{type:e.type,contract_class:e.contract,compiled_class_hash:e.compiledClassHash,sender_address:e.senderAddress,version:eY(e.version||r.v2),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:eY(e.version||r.v1),...n};if("DEPLOY_ACCOUNT"===e.type)return{type:e.type,constructor_calldata:t7.compile(e.constructorCalldata||[]),class_hash:eY(e.classHash),contract_address_salt:eY(e.addressSalt||0),version:eY(e.version||r.v1),...n};throw Error("Sequencer buildTransaction received unknown TransactionType")}},na=class{constructor(e){e instanceof na?this.provider=e.provider:e instanceof r4||e instanceof nn?this.provider=e:e&&"rpc"in e?this.provider=new r4(e.rpc):e&&"sequencer"in e?this.provider=new nn(e.sequencer):this.provider=new r4}async getChainId(){return this.provider.getChainId()}async getBlock(e){return this.provider.getBlock(e)}async getClassAt(e,t){return this.provider.getClassAt(e,t)}async getClassHashAt(e,t){return this.provider.getClassHashAt(e,t)}getClassByHash(e){return this.provider.getClassByHash(e)}async getEstimateFee(e,t,r){return this.provider.getEstimateFee(e,t,r)}async getInvokeEstimateFee(e,t,r,n){return this.provider.getInvokeEstimateFee(e,t,r,n)}async getEstimateFeeBulk(e,t){return this.provider.getEstimateFeeBulk(e,t)}async getNonceForAddress(e,t){return this.provider.getNonceForAddress(e,t)}async getStorageAt(e,t,r){return this.provider.getStorageAt(e,t,r)}async getTransaction(e){return this.provider.getTransaction(e)}async getTransactionReceipt(e){return this.provider.getTransactionReceipt(e)}async callContract(e,t){return this.provider.callContract(e,t)}async invokeFunction(e,t){return this.provider.invokeFunction(e,t)}async deployAccountContract(e,t){return this.provider.deployAccountContract(e,t)}async declareContract(e,t){return this.provider.declareContract(e,t)}async getDeclareEstimateFee(e,t,r,n){return this.provider.getDeclareEstimateFee(e,t,r,n)}getDeployAccountEstimateFee(e,t,r,n){return this.provider.getDeployAccountEstimateFee(e,t,r,n)}async getCode(e,t){return this.provider.getCode(e,t)}async waitForTransaction(e,t){return this.provider.waitForTransaction(e,t)}async getSimulateTransaction(e,t){return this.provider.getSimulateTransaction(e,t)}async getStateUpdate(e){return this.provider.getStateUpdate(e)}async getStarkName(e,t){return rZ(this,e,t)}async getAddressFromStarkName(e,t){return r0(this,e,t)}async getContractVersion(e,t,r){return this.provider.getContractVersion(e,t,r)}};F({},{fromCallsToExecuteCalldata:()=>ni,fromCallsToExecuteCalldataWithNonce:()=>no,fromCallsToExecuteCalldata_cairo1:()=>nl,getExecuteCalldata:()=>nu,transformCallsToMulticallArrays:()=>ns,transformCallsToMulticallArrays_cairo1:()=>nc});var ns=e=>{let t=[],r=[];return e.forEach(e=>{let n=t7.compile(e.calldata||[]);t.push({to:eG(e.contractAddress).toString(10),selector:eG(e3(e.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:t,calldata:t7.compile({calldata:r})}},ni=e=>{let{callArray:t,calldata:r}=ns(e),n=t7.compile({callArray:t});return[...n,...r]},no=(e,t)=>[...ni(e),eG(t).toString()],nc=e=>{let t=e.map(e=>({to:eG(e.contractAddress).toString(10),selector:eG(e3(e.entrypoint)).toString(10),calldata:t7.compile(e.calldata||[])}));return t},nl=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:t7.compile(e.calldata)}));return t7.compile({orderCalls:t})},nu=(e,t="0")=>"1"===t?nl(e):ni(e);F({},{encodeData:()=>nm,encodeType:()=>ny,encodeValue:()=>nE,getDependencies:()=>ng,getMessageHash:()=>nC,getStructHash:()=>nb,getTypeHash:()=>n_,isMerkleTreeType:()=>nf,prepareSelector:()=>np}),F({},{MerkleTree:()=>nd,proofMerklePath:()=>function e(t,r,n){if(0===n.length)return t===r;let[a,...s]=n;return e(t,nd.hash(r,a),s)}});var nd=class{constructor(e){this.branches=[],this.leaves=e,this.root=this.build(e)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);let t=[];for(let r=0;r<e.length;r+=2)r+1===e.length?t.push(nd.hash(e[r],"0x0")):t.push(nd.hash(e[r],e[r+1]));return this.build(t)}static hash(e,t){let[r,n]=[eG(e),eG(t)].sort((e,t)=>e>=t?1:-1);return O.pedersen(r,n)}getProof(e,t=this.leaves,r=[]){let n=t.indexOf(e);if(-1===n)throw Error("leaf not found");if(1===t.length)return r;let a=n%2==0,s=(a?t[n+1]:t[n-1])??"0x0",i=[...r,s],o=this.leaves.length===t.length?-1:this.branches.findIndex(e=>e.length===t.length),c=this.branches[o+1]??[this.root];return this.getProof(nd.hash(a?e:s,a?s:e),c,i)}},nh=e=>{let t=!!(e.types&&e.primaryType&&e.message);return t};function np(e){return eM(e)?e:e3(e)}function nf(e){return"merkletree"===e.type}var ng=(e,t,r=[])=>("*"===t[t.length-1]&&(t=t.slice(0,-1)),r.includes(t)||!e[t])?r:[t,...e[t].reduce((t,r)=>[...t,...ng(e,r.type,t).filter(e=>!t.includes(e))],[])],ny=(e,t)=>{let[r,...n]=ng(e,t),a=r?[r,...n.sort()]:[];return a.map(t=>`${t}(${e[t].map(e=>`${e.name}:${e.type}`)})`).join("")},n_=(e,t)=>e3(ny(e,t)),nE=(e,t,r,n={})=>{if(e[t])return[t,nb(e,t,r)];if(Object.keys(e).map(e=>`${e}*`).includes(t)){let n=r.map(r=>nb(e,t.slice(0,-1),r));return[t,rc(n)]}if("merkletree"===t){let t=function(e,t){if(t.parent&&t.key){let r=e[t.parent],n=r.find(e=>e.name===t.key),a=nf(n);if(!a)throw Error(`${t.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return n.contains}return"raw"}(e,n),a=r.map(r=>nE(e,t,r)[1]),{root:s}=new nd(a);return["felt",s]}return"felt*"===t?["felt*",rc(r)]:"selector"===t?["felt",np(r)]:[t,function(e){try{return eY(e)}catch(t){if("string"==typeof e)return eY(to(e));throw Error(`Invalid BigNumberish: ${e}`)}}(r)]},nm=(e,t,r)=>{let[n,a]=e[t].reduce(([n,a],s)=>{if(void 0===r[s.name]||null===r[s.name])throw Error(`Cannot encode data: missing data for '${s.name}'`);let i=r[s.name],[o,c]=nE(e,s.type,i,{parent:t,key:s.name});return[[...n,o],[...a,c]]},[["felt"],[n_(e,t)]]);return[n,a]},nb=(e,t,r)=>rc(nm(e,t,r)[1]),nC=(e,t)=>{if(!nh(e))throw Error("Typed data does not match JSON schema");let r=[to("StarkNet Message"),nb(e.types,"StarkNetDomain",e.domain),t,nb(e.types,e.primaryType,e.message)];return rc(r)};function nT(e){return e.filter(e=>"event"===e.type&&(e.size||"enum"!==e.kind)).reduce((e,t)=>{let r=t.name.slice(t.name.lastIndexOf(":")+1),n={...t};return n.name=r,{...e,[q(O.keccak(j(r)).toString(16))]:n}},{})}function nk(e,t,r,n){let a=e.flat().reduce((e,a)=>{let s=t[a.keys[0]];if(!s)return e;let i={};i[s.name]={},a.keys.shift();let o=a.keys[Symbol.iterator](),c=a.data[Symbol.iterator](),l=s.members?.filter(e=>"key"===e.kind)||s.keys,u=s.members?.filter(e=>"data"===e.kind)||s.data;return l.forEach(e=>{i[s.name][e.name]=tQ(o,e,r,n,i[s.name])}),u.forEach(e=>{i[s.name][e.name]=tQ(c,e,r,n,i[s.name])}),e.push(i),e},[]);return a}new na({rpc:{default:!0}}),F({},{getAbiEvents:()=>nT,parseEvents:()=>nk})}}]);